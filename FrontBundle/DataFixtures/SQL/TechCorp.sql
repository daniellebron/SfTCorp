CREATE TABLE Contrato (id INT AUTO_INCREMENT NOT NULL, tarifa_id INT DEFAULT NULL, usuario_id INT DEFAULT NULL, fecha DATE NOT NULL, referencia VARCHAR(255) NOT NULL, INDEX IDX_9F1F0775FE3B76B (tarifa_id), INDEX IDX_9F1F0775DB38439E (usuario_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Etiqueta (id INT AUTO_INCREMENT NOT NULL, usuario_id INT DEFAULT NULL, texto VARCHAR(255) NOT NULL, INDEX IDX_942AC46CDB38439E (usuario_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Grupo (id INT AUTO_INCREMENT NOT NULL, nombre VARCHAR(255) NOT NULL, rol VARCHAR(20) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Nota (id INT AUTO_INCREMENT NOT NULL, usuario_id INT DEFAULT NULL, titulo VARCHAR(255) NOT NULL, texto LONGTEXT NOT NULL, fecha DATETIME NOT NULL, path VARCHAR(255) NOT NULL, INDEX IDX_68E29133DB38439E (usuario_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE nota_etiqueta (nota_id INT NOT NULL, etiqueta_id INT NOT NULL, INDEX IDX_74ECDADEA98F9F02 (nota_id), INDEX IDX_74ECDADED53DA3AB (etiqueta_id), PRIMARY KEY(nota_id, etiqueta_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Publicidad (id INT AUTO_INCREMENT NOT NULL, nombre VARCHAR(255) NOT NULL, texto VARCHAR(255) NOT NULL, path VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Tarifa (id INT AUTO_INCREMENT NOT NULL, nombre VARCHAR(255) NOT NULL, periodo INT NOT NULL, precio DOUBLE PRECISION NOT NULL, validoDesde DATE NOT NULL, validoHasta DATE NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Usuario (id INT AUTO_INCREMENT NOT NULL, nombre VARCHAR(255) NOT NULL, apellidos VARCHAR(255) NOT NULL, salt VARCHAR(255) NOT NULL, username VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, isActive TINYINT(1) NOT NULL, tokenRegistro VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE usuario_grupo (usuario_id INT NOT NULL, grupo_id INT NOT NULL, INDEX IDX_91D0F1CDDB38439E (usuario_id), INDEX IDX_91D0F1CD9C833003 (grupo_id), PRIMARY KEY(usuario_id, grupo_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE blog (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, author VARCHAR(100) NOT NULL, blog LONGTEXT NOT NULL, image VARCHAR(20) NOT NULL, tags LONGTEXT NOT NULL, slug VARCHAR(255) NOT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE comment (id INT AUTO_INCREMENT NOT NULL, blog_id INT DEFAULT NULL, user VARCHAR(255) NOT NULL, comment LONGTEXT NOT NULL, approved TINYINT(1) NOT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, INDEX IDX_9474526CDAE07E97 (blog_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE address (id BIGINT AUTO_INCREMENT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE city (id BIGINT AUTO_INCREMENT NOT NULL, country_id BIGINT DEFAULT NULL, INDEX IDX_2D5B0234F92F3E70 (country_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE client (idClient BIGINT AUTO_INCREMENT NOT NULL, PRIMARY KEY(idClient)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Acheter (client_id BIGINT NOT NULL, reduction_id BIGINT NOT NULL, INDEX IDX_A1B3A88419EB6921 (client_id), INDEX IDX_A1B3A884C03CB092 (reduction_id), PRIMARY KEY(client_id, reduction_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE company (id BIGINT AUTO_INCREMENT NOT NULL, address_id BIGINT DEFAULT NULL, UNIQUE INDEX UNIQ_4FBF094FF5B7AF75 (address_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE country (id BIGINT AUTO_INCREMENT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE reduction_code (idClient BIGINT AUTO_INCREMENT NOT NULL, PRIMARY KEY(idClient)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE tech_status (id INT AUTO_INCREMENT NOT NULL, content VARCHAR(255) NOT NULL, deleted TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE Contrato ADD CONSTRAINT FK_9F1F0775FE3B76B FOREIGN KEY (tarifa_id) REFERENCES Tarifa (id);
ALTER TABLE Contrato ADD CONSTRAINT FK_9F1F0775DB38439E FOREIGN KEY (usuario_id) REFERENCES Usuario (id);
ALTER TABLE Etiqueta ADD CONSTRAINT FK_942AC46CDB38439E FOREIGN KEY (usuario_id) REFERENCES Usuario (id);
ALTER TABLE Nota ADD CONSTRAINT FK_68E29133DB38439E FOREIGN KEY (usuario_id) REFERENCES Usuario (id);
ALTER TABLE nota_etiqueta ADD CONSTRAINT FK_74ECDADEA98F9F02 FOREIGN KEY (nota_id) REFERENCES Nota (id) ON DELETE CASCADE;
ALTER TABLE nota_etiqueta ADD CONSTRAINT FK_74ECDADED53DA3AB FOREIGN KEY (etiqueta_id) REFERENCES Etiqueta (id) ON DELETE CASCADE;
ALTER TABLE usuario_grupo ADD CONSTRAINT FK_91D0F1CDDB38439E FOREIGN KEY (usuario_id) REFERENCES Usuario (id) ON DELETE CASCADE;
ALTER TABLE usuario_grupo ADD CONSTRAINT FK_91D0F1CD9C833003 FOREIGN KEY (grupo_id) REFERENCES Grupo (id) ON DELETE CASCADE;
ALTER TABLE comment ADD CONSTRAINT FK_9474526CDAE07E97 FOREIGN KEY (blog_id) REFERENCES blog (id);
ALTER TABLE city ADD CONSTRAINT FK_2D5B0234F92F3E70 FOREIGN KEY (country_id) REFERENCES country (id);
ALTER TABLE Acheter ADD CONSTRAINT FK_A1B3A88419EB6921 FOREIGN KEY (client_id) REFERENCES client (id);
ALTER TABLE Acheter ADD CONSTRAINT FK_A1B3A884C03CB092 FOREIGN KEY (reduction_id) REFERENCES reduction_code (id);
ALTER TABLE company ADD CONSTRAINT FK_4FBF094FF5B7AF75 FOREIGN KEY (address_id) REFERENCES address (id);
